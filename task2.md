вот допустим стакан асков на USD000000TOD:


```
56.0000 1000
55.0025 2000
55.0000 3000
54.6750 14000
54.5025 20000
54.1025 1000
54.1000 1000
54.0075 5000
54.0000 20000
```

прайс степ инструмента равен 0.0025, и нам нужно взять рэндж в 50 таких степов от самого лучшего аска

то есть нижняя граница рэнджа - лучший аск `54.0000`
верхняя граница рэнджа - лучший аск + 50 степов - 1 степ (за лучший аск, чтобы в итоге было 50 степов) 54.0000 + 49 * 0.0025 = `54.1225`

под этот рэндж попадают 
```
55.54.1025, 
54.1000, 
54.0075, 
54.0000
```

дальше мы разбиваем изначальный рендж 
54.0000 - 54.1225 на 10 под-рэнджей, чтобы в каждом было по 5 прайс степов. Пример:
верхняя граница 10 под-рэнджа - 
54.0000 + 4 * 0.0025 = 54.0100, и под этот под-рэндж попадают 
54.0075, 
54.0000, 
по которым идет суммация объемов 5000 + 20000 = 25000
верхняя граница 9 под-рэнджа - 54.0125 + 4 * 0.0025 = 54.0225, и под этот рэндж ничего не попадает, и объемы по нему равны 0
...
таким образов делается все 10 под-рэнджей и получается 10 циферок объема

с бидами делается все абсолютно то же самое, только с другого конца, и мы опять же получаем с бидов 10 циферов суммарного объема по каждой пятерке прайс степов
итого у нас 10 + 10 = 20 циферок, которые надо:
0) перед всем делом надо посчитать весь объем, который содержится в 50 прайс степах в асках и в 50 прайс степах в бидах (общая сумма 100 прайс степов)
1) разделить все наши 20 циферок на весь объем, посчитанный в 0) (чтобы найти относительный объем)
2) записать куда-то в формате время цифра1 цифра2 ... цифра20

и так для каждого изменения ордербука

браво, вы великолепны